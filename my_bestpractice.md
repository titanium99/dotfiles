# おれおれ開発ベストプラクティス

開発に関しての環境づくりの手順と、よく使う（であろう）コマンドのメモ

## 開発環境の準備
### Webアプリ
基本は1プロジェクトにiTermウインドウ１枚

1. iTerm2を開く  
2. tmuxを起動（アタッチ）  
tmuxのセッションが残っているか確認
```
% tmux list-sessions 
もしくは
% tmux ls
```
セッションがあれば -t 頭番号でアタッチ
```
% tmux a -t 0
```
なければ
```
% tmux
```
3. painの分割、レイアウト調整  
```
横分割                   | <C-t>-
縦分割                   | <C-t>|
painの入れ替え           | <C-t>{
painの入れ替え（逆順）   | <C-t>}
painのインジケーター表示 | <C-t>q
ラインを上げる           | <C-t><C-up>
ラインを下げる           | <C-t><C-down>
```
4. 2ペインで上部にshell、下部にvimにし、ウインドウのサイズを調整。  
どちらかというとvimの方を大きめ  
5. プロジェクトルートに移動し(2painとも）、vimを立ち上げ  
```
<C-t>:set-window-option synchronize-panes on  -> 全部の画面に同じコマンドを送る  
% cd /path/to/project  
<C-t>:set-window-option synchronize-panes off -> 上記の取り消し  
% vim /files  
```
6. NERDTreeを起動させる  
```
:NERD<tab> -> :NERDTree  
```
7. vimで編集  

ウインドウを操作したい場合  
[Vimの便利な画面分割＆タブページと、それを更に便利にする方法 - Qiita](http://qiita.com/tekkoc/items/98adcadfa4bdc8b5a6ca)  

コマンド          | 動作
------------------|-------------------------------
:sp [file]        | ウィンドウを横に分割し, fileを開く(file名はなくても良い)
:vs [file]        | ウィンドウを縦に分割し, fileを開く(file名はなくても良い)
Ctrl-w s          | ウィンドウを横に分割する
Ctrl-w v          | ウィンドウを縦に分割する
:only             | カーソルのあるウィンドウ以外閉じる
Ctrl-w o          | カーソルのあるウィンドウ以外閉じる
Ctrl-w w          | 次のウィンドウに移動
Ctrl-w p          | 前のウィンドウに移動
Ctrl-w h, j, k, l | 左, 下, 上, 右のウィンドウに移動する
Ctrl-w H, J, K, L | カーソルがあるウィンドウを左, 下, 上, 右方向に移動する

コマンド   |動作                 |  オリジナル設定
-----------|---------------------|----------------
`<C-w>H `  |ウインドウを左に移動 | 
`<C-w>J `  |ウインドウを下に移動 | 
`<C-w>K `  |ウインドウを上に移動 | 
`<C-w>L `  |ウインドウを右に移動 | 
`<C-w>L `  |ウインドウを閉じる   | 

 コマンド    |動作           |  オリジナル設定
-------------|---------------|----------------
`<C-w>_`     |縦に最大化     |
`<C-w>パイプ`|横に最大化     |
`なし`       |縦横最大化     |
`<C-w>=`     |大きさを揃える |
`<C-w>>`     |幅を増やす     |
`<C-w><`     |幅を減らす     |
`<C-w>+`     |高さを増やす   |
`<C-w>-`     |高さを減らす   |

コマンド    | 動作
------------|-------------------------------------
`{N}<C-w>+` | カーソル位置のウィンドウを{N}行だけ大きくする
`{N}<C-w>-` | カーソル位置のウィンドウを{N}行だけ小さくする
`{N}<C-w>_` | カーソル位置のウィンドウの大きさを{N}行にする
`<C-w>=`    | 全てのウィンドウの大きさを揃える

({N}を省略するとウィンドウを最大サイズにする)


8. 作業中断
```
tmux デタッチ| <c-t> d
```
作業再開の場合は
```
% tmux attach
```

9. 作業終了


#### vim基本操作  
[Vimの使い方 よく使うコマンドまとめ | Memo on the Web](http://motw.mods.jp/Vim/command.html)


### サーバ管理
サーバ側でtmux立ち上げて作業する  
ホスト側はtmuxで作業しなくてもいい  
もしホスト側で使う場合は、prefixの重複を注意（サーバ側を変えるとか）  
[tmux — 仮想端末でリモート仕事を安全に &mdash; Watallica metallicus](http://meme.biology.tohoku.ac.jp/students/iwasaki/dev/tmux.html)


1. iTerm2を起動  
2. sshでサーバにログイン  

3. （サーバ）tmuxを起動（アタッチ）  
もしインストールしていなければ、インストール  
必要に応じ、ドットファイルも作成(github経由）  
```
% tmux attach -d
```
4. （サーバ）必要なペインに分割/サイズ調整  
5. （サーバ）作業
6. （サーバ）作業中断
```
tmux デタッチ| <c-t> d
```
kill-serverとか基本使わなくてもいいと思う  

7. （サーバ）ログアウト

### text(markdown text)編集
1. iterm2を起動
2. vimを起動
3. NERDTreeを起動
4. ウインドウ分割・調整する
5. 編集する
  - markdown文書でよく使う操作、プラグイン
      


